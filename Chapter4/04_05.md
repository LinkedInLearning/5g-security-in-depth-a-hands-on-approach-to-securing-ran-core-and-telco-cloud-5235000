# ðŸ§ª Free5GC OAuth2 Testing Lab

## ðŸŽ¯ Objective

Understand how enabling OAuth2 in Free5GC impacts NF-to-NF communication and visualize the difference using Wireshark. This lab demonstrates:

- What changes in packet flows when OAuth2 is enabled
- How to verify the presence of OAuth2 tokens in NF messages
- Security implications of enabling or disabling OAuth2

---

## ðŸ“¦ Prerequisites

- âœ… Ubuntu 20.04 or 22.04 (Kernel 5.4.x or 5.15.x recommended)
- âœ… Free5GC v3.0.6+ installed and built
- âœ… `tcpdump` or `Wireshark` installed
- âœ… Access to Free5GC `config/` folder
- âœ… (Optional) OAuth2 mock server like [`ory/fosite`](https://github.com/ory/fosite)

---

## ðŸ§± Lab Setup

### ðŸ”¹ 1. Clone and Build Free5GC

```bash
git clone https://github.com/free5gc/free5gc.git
cd free5gc
./build.sh

### ðŸ”¹ 2. Configure NRF

Edit the config file:
vim config/nrf.conf

A. Run Without OAuth2 (Baseline)
Set the following in nrf.conf:

"Security": {
  "OAuth2": {
    "Enable": false
  }
}


B. Run With OAuth2 Enabled

"Security": {
  "OAuth2": {
    "Enable": true,
    "TokenURL": "https://mock-oauth2-server/token",
    "ClientID": "nrf",
    "ClientSecret": "nrf-secret"
  }
}


### ðŸ”¹ 3. Start Packet capture

sudo tcpdump -i lo -w oauth2-trace.pcap

### ðŸ”¹ 4. Network Function Restart

./nrf/nrf
./amf/amf
./smf/smf


